[gd_scene load_steps=16 format=3 uid="uid://cr8smux4kmmsa"]

[ext_resource type="Script" path="res://Scripts/main.gd" id="1_l05gp"]
[ext_resource type="Script" path="res://Scripts/main_camera.gd" id="4_1nmsv"]
[ext_resource type="PackedScene" uid="uid://dkrnno34mdesj" path="res://Scenes/Fish/player_fish.tscn" id="4_arln1"]
[ext_resource type="PackedScene" uid="uid://ctj3d46k1o7r" path="res://Scenes/background.tscn" id="4_bylhu"]
[ext_resource type="PackedScene" uid="uid://bwqf4vxhwwup7" path="res://Scenes/Fish/krill.tscn" id="5_6vmr4"]
[ext_resource type="PackedScene" uid="uid://sf5gasrg5npr" path="res://Scenes/Fish/npc_fish_1.tscn" id="6_a677r"]
[ext_resource type="Script" path="res://Scripts/fish_spawner.gd" id="7_arap4"]
[ext_resource type="Script" path="res://Scripts/food_spawner.gd" id="8_bekjd"]
[ext_resource type="PackedScene" uid="uid://bf4vfvl205mb" path="res://Scenes/Fish/var_1_npc_fish.tscn" id="8_lofgl"]
[ext_resource type="PackedScene" uid="uid://btuc5n8q7vd33" path="res://Scenes/Fish/var_2_npc_fish.tscn" id="9_2xmow"]
[ext_resource type="Texture2D" uid="uid://daqrloyoxry3b" path="res://SpearFishing Assets Pack/Sprites/Fish1 - 16x16/Purple copy.png" id="11_3062g"]
[ext_resource type="Script" path="res://Scripts/UI/ButtonControl.gd" id="11_o6dtm"]
[ext_resource type="Texture2D" uid="uid://1r43go3bjesf" path="res://SpearFishing Assets Pack/Sprites/Fish1 - 16x16/Red copy.png" id="12_58unb"]
[ext_resource type="Texture2D" uid="uid://bx1du65ym1xwy" path="res://SpearFishing Assets Pack/Sprites/Fish1 - 16x16/Orange1 copy.png" id="13_r881d"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5eg53"]
size = Vector2(666, 322)

[node name="Main" type="Node2D"]
script = ExtResource("1_l05gp")

[node name="MainCamera" type="Camera2D" parent="."]
zoom = Vector2(3, 3)
limit_left = -460
limit_top = -260
limit_right = 480
limit_bottom = 180
editor_draw_limits = true
script = ExtResource("4_1nmsv")
step = 5.0
min_zoom = 2.0
max_zoom = 4.0

[node name="Background" parent="." instance=ExtResource("4_bylhu")]
position = Vector2(2.08165e-12, -80)

[node name="player_fish" parent="." instance=ExtResource("4_arln1")]

[node name="Krill" parent="." instance=ExtResource("5_6vmr4")]
position = Vector2(111, -51)
motion_mode = 1
move_speed = 2.0

[node name="npcMoveArea" type="Area2D" parent="."]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="npcMoveArea"]
polygon = PackedVector2Array(-335, -238, -322, -238, -321, -192, -305, -192, -304, -175, -289, -175, -289, -160, -274, -160, -274, -128, -259, -128, -256, -48, -242, -48, -241, -31, -225, -31, -224, 48, -209, 48, -209, 80, 273, 81, 273, -32, 288, -32, 288, -128, 303, -128, 305, -207, 321, -208, 321, -238)

[node name="CollisionShape2D" type="CollisionShape2D" parent="npcMoveArea"]
position = Vector2(11, -77)
shape = SubResource("RectangleShape2D_5eg53")

[node name="npc_fish1" parent="." node_paths=PackedStringArray("move_area") instance=ExtResource("6_a677r")]
move_area = NodePath("../npcMoveArea")
move_speed = 50.0

[node name="FishSpawner" type="Node2D" parent="." node_paths=PackedStringArray("npc_move_area", "button_control")]
script = ExtResource("7_arap4")
fish_blueprint_arr = Array[PackedScene]([ExtResource("6_a677r"), ExtResource("8_lofgl"), ExtResource("9_2xmow")])
npc_move_area = NodePath("../npcMoveArea")
button_control = NodePath("../UI/ButtonControl")

[node name="Timer" type="Timer" parent="." node_paths=PackedStringArray("npc_move_area")]
autostart = true
script = ExtResource("8_bekjd")
npc_move_area = NodePath("../npcMoveArea")

[node name="UI" type="CanvasLayer" parent="."]
layer = 0

[node name="ButtonControl" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 0
offset_left = 50.0
offset_top = 64.0
offset_right = 474.0
offset_bottom = 175.0
script = ExtResource("11_o6dtm")

[node name="HBoxContainer" type="HBoxContainer" parent="UI/ButtonControl"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="PurpleFish" type="Button" parent="UI/ButtonControl/HBoxContainer"]
custom_minimum_size = Vector2(120, 2.08165e-12)
layout_mode = 2
icon = ExtResource("11_3062g")
icon_alignment = 1
expand_icon = true

[node name="RedFish" type="Button" parent="UI/ButtonControl/HBoxContainer"]
custom_minimum_size = Vector2(120, 2.08165e-12)
layout_mode = 2
icon = ExtResource("12_58unb")
icon_alignment = 1
expand_icon = true

[node name="YellowFish" type="Button" parent="UI/ButtonControl/HBoxContainer"]
custom_minimum_size = Vector2(120, 2.08165e-12)
layout_mode = 2
icon = ExtResource("13_r881d")
icon_alignment = 1
expand_icon = true

[connection signal="timeout" from="Timer" to="Timer" method="_on_timeout"]
[connection signal="pressed" from="UI/ButtonControl/HBoxContainer/PurpleFish" to="UI/ButtonControl" method="_on_purple_fish_pressed"]
[connection signal="pressed" from="UI/ButtonControl/HBoxContainer/RedFish" to="UI/ButtonControl" method="_on_red_fish_pressed"]
[connection signal="pressed" from="UI/ButtonControl/HBoxContainer/YellowFish" to="UI/ButtonControl" method="_on_yellow_fish_pressed"]
